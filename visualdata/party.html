<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>index</title>
        <script type="text/javascript" src="js/jquery.js"></script>
        <link rel="stylesheet" href="css/comon.css">
        <style>
          .mainbox>ul>li:first-child>.bellone{
              width: 55%;
          }
          .mainbox>ul>li{
            margin-top: -37px;
            /* color: transparent; */
          }
          .footerBox{
            position: absolute;
            left: 0%;
            /* border: 1px solid; */
            width: 100%;
            padding: .1rem .18rem;
            margin-top: -10px;
            display: flex;
            justify-content: space-between;
          }
          .bellone{
            width: 24%;
            height: 0;
          }
        .boxall{
          color: white;
          padding: .1rem ;
        }
        #map_1{
          transform: translateY(-80px);
        }
        #main>div:first-child,#main2>div:first-child,#main3>div:first-child,#main4>div:first-child{
          width: 100%!important;
        }
        </style>
    </head>
    <script>
        $(window).load(function () {
            $(".loading").fadeOut()
        })

        /****/
        $(document).ready(function () {
            var whei = $(window).width()
            $("html").css({
                fontSize: whei / 20
            })
            $(window).resize(function () {
                var whei = $(window).width()
                $("html").css({
                    fontSize: whei / 20
                })
            });
        });
    </script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <!-- <script language="JavaScript" src="js/js.js"></script> -->
    <body style="height:100vh;background-position: 0% 100%;">
        <div class="canvas" style="opacity: .04">
            <iframe frameborder="0" src="js/index.html" style="width: 100%; height: 180%"></iframe>
        </div>
        <div class="loading">
            <div class="loadbox">
                <img src="picture/loading.gif">
                页面加载中...
            </div>
        </div>
        <div class="head">
          
        </div>
        <div class="mainbox_mission">
            <ul class="clearfix">
                <li>
                    <div class="boxall">
                        <div class="allnav" id="part" style="height:512px;"></div>
                        <div class="boxfoot"></div>
                    </div>

            
                </li>
               
               <li>
                    <div class="boxall">
                        <div class="allnav" id="party_bar" style="height:512px;"></div>
                        <div class="boxfoot"></div>
                    </div>

            
                </li>

            </ul>
        <div class="back"></div>
        <!--<script type="text/javascript" src="js/china.js"></script>-->
        <script type="text/javascript" src="/js/rsseasy.min.js"></script>
        <script src="/js/rssapi.min.js" type="text/javascript"></script>
        <script src="/js/md5.min.js" type="text/javascript"></script>
        <script src="./js/echart_party.js"></script>

        <script>

        var ddtArr=[]; 
        
        //var globalCan = ["中国共产党", "民主党", "无党派", "共青团", "群众"];

        var partyCCP =[ {name:"1027",value:0} , {name:"1028",value:0}   , {name:"1029",value:0} , {name:"1030",value:0}  , {name:"1031",value:0}  , {name:"1032",value:0}  , {name:"1033",value:0}  ,
            {name:"1034",value:0}  , {name:"1035",value:0}  , {name:"1036",value:0}  , {name:"1037",value:0}  ,{name:"1038",value:0} ,{name:"1039",value:0}  , {name:"1040",value:0} , {name:"1041",value:0}  , 
            {name:"1042",value:0}, {name:"1043",value:0}, {name:"1043",value:0} , {name:"1044",value:0}, {name:"1046",value:0}, {name:"1047",value:0}];
      
         var partyDem =[ {name:"1027",value:0} , {name:"1028",value:0}   , {name:"1029",value:0} , {name:"1030",value:0}  , {name:"1031",value:0}  , {name:"1032",value:0}  , {name:"1033",value:0}  ,
            {name:"1034",value:0}  , {name:"1035",value:0}  , {name:"1036",value:0}  , {name:"1037",value:0}  ,{name:"1038",value:0} ,{name:"1039",value:0}  , {name:"1040",value:0} , {name:"1041",value:0}  , 
            {name:"1042",value:0}, {name:"1043",value:0}, {name:"1043",value:0} , {name:"1044",value:0}, {name:"1046",value:0}, {name:"1047",value:0}];
    
        var partyNo =[ {name:"1027",value:0} , {name:"1028",value:0}   , {name:"1029",value:0} , {name:"1030",value:0}  , {name:"1031",value:0}  , {name:"1032",value:0}  , {name:"1033",value:0}  ,
            {name:"1034",value:0}  , {name:"1035",value:0}  , {name:"1036",value:0}  , {name:"1037",value:0}  ,{name:"1038",value:0} ,{name:"1039",value:0}  , {name:"1040",value:0} , {name:"1041",value:0}  , 
            {name:"1042",value:0}, {name:"1043",value:0}, {name:"1043",value:0} , {name:"1044",value:0}, {name:"1046",value:0}, {name:"1047",value:0}];
    
       var partyYouth =[ {name:"1027",value:0} , {name:"1028",value:0}   , {name:"1029",value:0} , {name:"1030",value:0}  , {name:"1031",value:0}  , {name:"1032",value:0}  , {name:"1033",value:0}  ,
            {name:"1034",value:0}  , {name:"1035",value:0}  , {name:"1036",value:0}  , {name:"1037",value:0}  ,{name:"1038",value:0} ,{name:"1039",value:0}  , {name:"1040",value:0} , {name:"1041",value:0}  , 
            {name:"1042",value:0}, {name:"1043",value:0}, {name:"1043",value:0} , {name:"1044",value:0}, {name:"1046",value:0}, {name:"1047",value:0}];
     
      var partyNormal =[ {name:"1027",value:0} , {name:"1028",value:0}   , {name:"1029",value:0} , {name:"1030",value:0}  , {name:"1031",value:0}  , {name:"1032",value:0}  , {name:"1033",value:0}  ,
            {name:"1034",value:0}  , {name:"1035",value:0}  , {name:"1036",value:0}  , {name:"1037",value:0}  ,{name:"1038",value:0} ,{name:"1039",value:0}  , {name:"1040",value:0} , {name:"1041",value:0}  , 
            {name:"1042",value:0}, {name:"1043",value:0}, {name:"1043",value:0} , {name:"1044",value:0}, {name:"1046",value:0}, {name:"1047",value:0}];
     
        var missioncode =[ "1027" , "1028"   , "1029" , "1030" , "1031" , "1032" , "1033" , "1034" , "1035" , "1036" , 
            "1037" , "1038"  , "1039"  , "1040", "1041", "1042" , "1043", "1044", "1045", "1046", "1047"];
         

        var dangpai=[  
            {name:"中国共产党",value:0},
            {name:"民主党",value:0},
            {name:"无党派",value:0},
            {name:"共青团",value:0},
            {name:"群众",value:0}
            
            ];        
        RssApi.Table.List("user").keyvalue({ "pagesize": 100000}).condition({}).getJson(function (json) {
//        RssApi.View.List("user_delegation").keyvalue({ "pagesize": 100000}).condition({}).getJson(function (json) {
              json.forEach(item => { // 便利数组，当datasss.value 不为null时，进行value ++
               
               if ( item.clan == 0 ){
                   dangpai[0].value ++ ;
               }
               else if ( item.clan == 1){
                   dangpai[1].value ++ ;
               }
               else if ( item.clan == 2){
                   dangpai[2].value ++ ;
               }
               else if ( item.clan == 3){
                   dangpai[3].value ++ ;
               }
               else if ( item.clan == 4){
                   dangpai[4].value ++ ;
               }
                for ( var i= 0 ;i < 21 ; i ++ ) {
                   if ( item.mission == missioncode[i] ) {
                        if ( item.sex == "0"){
                          partyCCP[ i ].value ++;
                        }
                        else if ( item.sex == "1"){
                          partyDem[ i ].value ++;
                        }
                        else if ( item.sex == "2"){
                          partyNo[ i ].value ++;
                        }
                         else if ( item.sex == "3"){
                          partyYouth[ i ].value ++;
                        }
                        else {
                          partyNormal[ i  ].value ++;
                        } 
                        break;
                    }
                }

            });
            showpartyChart( dangpai )
            showpartybarChart( partyCCP , partyDem ,partyNo ,partyYouth ,partyNormal )

          });
              
    
       </script>
    </body>
</html>
